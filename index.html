<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-03-26 Sat 01:16 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title></title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Lord Alveric" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline42">1. RubyNEAT &#x2013; Ruby implementation of Neural Evolution of Augmenting Topologies (NEAT)</a>
<ul>
<li><a href="#orgheadline1">1.1. What is NEAT?</a></li>
<li><a href="#orgheadline2">1.2. What is RubyNEAT?</a></li>
<li><a href="#orgheadline9">1.3. Architecture</a>
<ul>
<li><a href="#orgheadline3">1.3.1. Controller</a></li>
<li><a href="#orgheadline4">1.3.2. Evolver</a></li>
<li><a href="#orgheadline5">1.3.3. Expressor</a></li>
<li><a href="#orgheadline6">1.3.4. Evaluator</a></li>
<li><a href="#orgheadline7">1.3.5. Population</a></li>
<li><a href="#orgheadline8">1.3.6. Critter</a></li>
</ul>
</li>
<li><a href="#orgheadline11">1.4. Installation</a>
<ul>
<li><a href="#orgheadline10">1.4.1. Requirements</a></li>
</ul>
</li>
<li><a href="#orgheadline15">1.5. Examples</a>
<ul>
<li><a href="#orgheadline14">1.5.1. Note Well</a></li>
</ul>
</li>
<li><a href="#orgheadline41">1.6. RubyNEAT DSL</a>
<ul>
<li><a href="#orgheadline34">1.6.1. The XOR Neater Example</a></li>
<li><a href="#orgheadline40">1.6.2. Releases</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<p>
&#x2014;
layout: default
title: RubyNEAT
&#x2014;
</p>
<div id="outline-container-orgheadline42" class="outline-2">
<h2 id="orgheadline42"><span class="section-number-2">1</span> RubyNEAT &#x2013; Ruby implementation of Neural Evolution of Augmenting Topologies (NEAT)</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1"><span class="section-number-3">1.1</span> What is NEAT?</h3>
<div class="outline-text-3" id="text-1-1">
<p>
NEAT is an acronym for Neural Evolution of Augmenting Topologies.
In short, neural nets that are evolved from a minimal topology,
allowing selection to decide on what topologies are most adequate
for resolving the problem at hand.
</p>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">1.2</span> What is RubyNEAT?</h3>
<div class="outline-text-3" id="text-1-2">
<p>
RubyNEAT is the world's first (and currently only) implementation
of the NEAT algorithm in the Ruby programming language. RubyNEAT
leverages some of the benefits of Ruby, such as metaprogramming,
to implement activation of the Neural Net.
</p>

<p>
Basically, the Neural Nets in RubyNEAT manifests themselves in the
Phenotypes as functional programs &#x2013; of a sort. You may think of it
as an application of Genetic Programming techniques to resolving the
NEAT algorithm. As such, once fit Critters (neural nets) are found,
they may be extracted as pure Ruby code, not needing the
RubyNEAT engine for activation.
</p>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">1.3</span> Architecture</h3>
<div class="outline-text-3" id="text-1-3">
<p>
RubyNEAT comprises many interacting modules. While it is
not strictly necessary to understand RubyNEAT at this level
of detail, it would be beneficial for a number of reasons,
especially in understanding how to tweak the parameters
to improve performance for your application. 
</p>

<p>
RubyNEAT comprises the following modules: 
Controller, Expressor, Evaluator, Evolver, Population, and Critter.
</p>
</div>

<div id="outline-container-orgheadline3" class="outline-4">
<h4 id="orgheadline3"><span class="section-number-4">1.3.1</span> Controller</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
The Controller mediates all aspects of RubyNEAT
evolution, the various modules involved and their
interactions, and also holds the settings the other
modules will refer to. 
</p>

<p>
The Controller is singular. There can only be one
Controller in the RubyNEAT system. All other objects
associated with the Controller shall have embedded
in them a reference to their controller.
</p>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-4">
<h4 id="orgheadline4"><span class="section-number-4">1.3.2</span> Evolver</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
The Evolver module houses the evolving algorithms
for RubyNEAT. It evolves the entire Population of Critters.
</p>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5"><span class="section-number-4">1.3.3</span> Expressor</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
The Expressor module is responsible for interpreting
the Genotype of the Critters and creating their
Phenotypes. The default Expressor generates Ruby code
and attaches that code to the Phenotype instances of the Critter. 
</p>

<p>
It is entirely possible to swap in a different Expressor and
generate code for a different target language, or create some 
other construct. There is no limit to what you could
have an Expressor do.
</p>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-4">
<h4 id="orgheadline6"><span class="section-number-4">1.3.4</span> Evaluator</h4>
<div class="outline-text-4" id="text-1-3-4">
<p>
The Evaluator is a kind of bridge between the inner "biology" of the RubyNEAT "ecosystem" and the outside world. It has ties to the RubyNEAT DSL where you encode your own fitness functions and data links to some external problem space. It is, in a sense, the "gateway".
</p>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-4">
<h4 id="orgheadline7"><span class="section-number-4">1.3.5</span> Population</h4>
<div class="outline-text-4" id="text-1-3-5">
<p>
The Population is what your intuition tells you. It is a environment that houses a collection of Critters. 
</p>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-4">
<h4 id="orgheadline8"><span class="section-number-4">1.3.6</span> Critter</h4>
<div class="outline-text-4" id="text-1-3-6">
<p>
The Critter is the embodiment of both the genetics for the neural net and also the expression of the same. It contains, in other words, the Genotype and the Phenotype.
</p>

<p>
Critters are mated through the Evolver, and have their genes expressed through the Expressor. 
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">1.4</span> Installation</h3>
<div class="outline-text-3" id="text-1-4">
<p>
You may install RubyNEAT by cloning the repo at GitHub:
<a href="https://github.com/flajann2/rubyneat">RubyNEAT Github</a>
</p>

<p>
Or you may get it via a gem
</p>
<div class="org-src-container">

<pre class="src src-bash">gem install rubyneat --pre
</pre>
</div>
</div>

<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10"><span class="section-number-4">1.4.1</span> Requirements</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
You will need at least Ruby 2.0.0, though we strongly recommend 2.1.1
or better. We will NOT be supporting 1.9.x,
as that is being phased out anyway.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15"><span class="section-number-3">1.5</span> Examples</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Clone:
</p>

<div class="org-src-container">

<pre class="src src-bash">git clone git@github.com:flajann2/rubyneat_examples.git
</pre>
</div>

<p>
and cd into the '''rubyneat<sub>examples</sub>''' directory. 
</p>

<p>
Type: 
</p>

<div class="org-src-container">

<pre class="src src-bash">neat list neaters
</pre>
</div>

<p>
to get a list of neaters. To run one like, say, the XOR test:
</p>

<div class="org-src-container">

<pre class="src src-bash">neat run xor
</pre>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-4">
<h4 id="orgheadline14"><span class="section-number-4">1.5.1</span> Note Well</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
The pole-balancing invpend neater is still under
development. It will display a window with the cart and pole,
but will not balance yet. Just a matter of me 
finishing up that code. All the others work.
</p>
</div>

<ol class="org-ol"><li><a id="orgheadline12"></a>RubyNEAT<br  /><div class="outline-text-5" id="text-1-5-1-1">
<ul class="org-ul">
<li>GitHUB
<a href="https://github.com/flajann2/rubyneat">RubyNEAT GitHub</a></li>

<li><p>
Ruby GEM
</p>
<div class="org-src-container">

<pre class="src src-bash">gem install rubyneat --pre
</pre>
</div></li>
</ul>
</div></li>

<li><a id="orgheadline13"></a>RubyNEAT Examples<br  /><div class="outline-text-5" id="text-1-5-1-2">
<ul class="org-ul">
<li>Github
<a href="https://github.com/flajann2/rubyneat_examples">Example Neaters on GitHub</a></li>
</ul>
</div></li></ol>
</div>
</div>

<div id="outline-container-orgheadline41" class="outline-3">
<h3 id="orgheadline41"><span class="section-number-3">1.6</span> RubyNEAT DSL</h3>
<div class="outline-text-3" id="text-1-6">
<p>
I will take the '''XOR''' neater and document it.
This is not the perfect way to go,
but I will get more extensive later.
</p>
</div>

<div id="outline-container-orgheadline34" class="outline-4">
<h4 id="orgheadline34"><span class="section-number-4">1.6.1</span> The XOR Neater Example</h4>
<div class="outline-text-4" id="text-1-6-1">
<div class="org-src-container">

<pre class="src src-ruby">require <span style="color: #d01A4E;">'xor'</span>
include <span style="color: #268bd2;">NEAT</span>::<span style="color: #268bd2;">DSL</span>
</pre>
</div>

<ul class="org-ul">
<li>The first lines here includes the special XOR library, which is basically:</li>
</ul>

<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #b58900; font-weight: bold;">def</span> <span style="color: #2aa198;">xor</span>(*inp)
  inp.map{|n| (n &gt; 0) ? 1 : 0}.reduce {|p, i| p + ((i &gt; 0) ? 1 : 0) } == 1
<span style="color: #b58900; font-weight: bold;">end</span>
</pre>
</div>


<p>
-Basic settings for the '''XOR''', which can handle more than 2 inputs.
</p>

<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #268bd2;">XOR_INPUTS</span> = 2
<span style="color: #268bd2;">XOR_STATES</span> = 2 ** <span style="color: #268bd2;">XOR_INPUTS</span>
<span style="color: #268bd2;">MAX_FIT</span>    = <span style="color: #268bd2;">XOR_STATES</span>
<span style="color: #268bd2;">ALMOST_FIT</span> = <span style="color: #268bd2;">XOR_STATES</span> - 0.5
</pre>
</div>

<ul class="org-ul">
<li>The actual definition of the Neater. Here you specify the parameters RubyNEAT
will use to run the evolution, as well as the CPPN neuron types, the fitness function,
etc.</li>
</ul>

<div class="org-src-container">

<pre class="src src-ruby">define <span style="color: #d01A4E;">"XOR System"</span> <span style="color: #b58900; font-weight: bold;">do</span>
</pre>
</div>

<ul class="org-ul">
<li>Inputs defined as name: Neuron, name: Neuron &#x2026; hash. In this segment, we
create a block to generate the hash since we can have a variable number of
inputs to the XOR. The input names must be unique. Note that a bias neuron
is also supplied, and it is always called :bias.</li>
</ul>

<div class="org-src-container">

<pre class="src src-ruby">inputs {
  cinv = <span style="color: #268bd2;">Hash</span>[(1..<span style="color: #268bd2;">XOR_INPUTS</span>).map{|i| [(<span style="color: #d01A4E;">"i%s"</span> % i).to_sym, <span style="color: #268bd2;">InputNeuron</span>]}]
  cinv[<span style="color: #BFEBBF;">:bias</span>] = <span style="color: #268bd2;">BiasNeuron</span>
  cinv
}
</pre>
</div>

<ul class="org-ul">
<li>Outputs are defined in a similar fashion to the inputs. The names of all the 
output neurons must be unique. Here in this example we only have one output, and
we use the hyperbolic tan Neuron as the output. There is also a sigmoid Neuron
that could be used as well, but the input levels would have to be conditioned
to vary from 0 to 1 instead of from -1 to one.</li>
</ul>

<div class="org-src-container">

<pre class="src src-ruby">outputs <span style="color: #BFEBBF;">out</span>: <span style="color: #268bd2;">TanhNeuron</span>
</pre>
</div>

<ul class="org-ul">
<li>Hidden neuron specification is optional. 
The names given here are largely meaningless, but but follow the same rules
for uniqueness. The neurons specified will be selected randomly as the topologies
are augmented.</li>
</ul>

<div class="org-src-container">

<pre class="src src-ruby">hidden <span style="color: #BFEBBF;">tan</span>: <span style="color: #268bd2;">TanhNeuron</span>
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="orgheadline25"></a>Settings<br  /><div class="outline-text-5" id="text-1-6-1-1">
<p>
For RubyNEAT. Extensive documentation will be provided on a later date
as to the meanings, which closely follow the parameters for Ken Stanley's NEAT
implementation.
</p>
</div>

<ol class="org-ol"><li><a id="orgheadline16"></a>General<br  /><div class="outline-text-7" id="text-1-6-1-1-0-1">
<div class="org-src-container">

<pre class="src src-ruby">hash_on_fitness <span style="color: #cb4b16;">false</span>
start_population_size 30
population_size 30
max_generations 10000
max_population_history 10
</pre>
</div>
</div></li>

<li><a id="orgheadline17"></a>Evolver probabilities and SDs<br  /><div class="outline-text-7" id="text-1-6-1-1-0-2">
<p>
Perturbations
</p>
<div class="org-src-container">

<pre class="src src-ruby">mutate_perturb_gene_weights_prob 0.10
mutate_perturb_gene_weights_sd 0.25
</pre>
</div>
</div></li>

<li><a id="orgheadline18"></a>Complete Change of weight<br  /><div class="outline-text-7" id="text-1-6-1-1-0-3">
<div class="org-src-container">

<pre class="src src-ruby">mutate_change_gene_weights_prob 0.10
mutate_change_gene_weights_sd 1.00
</pre>
</div>
</div></li>

<li><a id="orgheadline19"></a>Adding new neurons and genes<br  /><div class="outline-text-7" id="text-1-6-1-1-0-4">
<div class="org-src-container">

<pre class="src src-ruby">mutate_add_neuron_prob 0.05
mutate_add_gene_prob 0.20
</pre>
</div>
</div></li>

<li><a id="orgheadline20"></a>Switching genes on and off<br  /><div class="outline-text-7" id="text-1-6-1-1-0-5">
<div class="org-src-container">

<pre class="src src-ruby">mutate_gene_disable_prob 0.01
mutate_gene_reenable_prob 0.01

interspecies_mate_rate 0.03
mate_only_prob 0.10 *0.7
</pre>
</div>
</div></li>

<li><a id="orgheadline21"></a>Mating<br  /><div class="outline-text-7" id="text-1-6-1-1-0-6">
<div class="org-src-container">

<pre class="src src-ruby">survival_threshold 0.20 <span style="color: #7E7D7E;"># </span><span style="color: #7E7D7E;">top % allowed to mate in a species.</span>
survival_mininum_per_species  4 <span style="color: #7E7D7E;"># </span><span style="color: #7E7D7E;">for small populations, we need SOMETHING to go on.</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline22"></a>Fitness costs<br  /><div class="outline-text-7" id="text-1-6-1-1-0-7">
<div class="org-src-container">

<pre class="src src-ruby">fitness_cost_per_neuron 0.00001
fitness_cost_per_gene   0.00001
</pre>
</div>
</div></li>

<li><a id="orgheadline23"></a>Speciation<br  /><div class="outline-text-7" id="text-1-6-1-1-0-8">
<div class="org-src-container">

<pre class="src src-ruby">compatibility_threshold 2.5
disjoint_coefficient 0.6
excess_coefficient 0.6
weight_coefficient 0.2
max_species 20
dropoff_age 15
smallest_species 5
</pre>
</div>
</div></li>

<li><a id="orgheadline24"></a>Sequencing<br  /><div class="outline-text-7" id="text-1-6-1-1-0-9">
<p>
The evaluation function is called repeatedly, and each iteration is given a
monotonically increasing integer which represents the sequence number. The results
of each run is returned, and those results are evaluated elsewhere in the Neater.
</p>

<div class="org-src-container">

<pre class="src src-ruby">start_sequence_at 0
end_sequence_at 2 ** <span style="color: #268bd2;">XOR_INPUTS</span> - 1
</pre>
</div>
</div></li></ol></li>

<li><a id="orgheadline31"></a>The Evolution Block<br  /><div class="outline-text-5" id="text-1-6-1-2">
<div class="org-src-container">

<pre class="src src-ruby">evolve <span style="color: #b58900; font-weight: bold;">do</span>
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="orgheadline26"></a>The Query Block<br  /><div class="outline-text-7" id="text-1-6-1-2-0-1">
<p>
This query shall return a vector result that will serve
as the inputs to the critter. 
</p>

<div class="org-src-container">

<pre class="src src-ruby">query { |seq|
  * <span style="color: #268bd2;">We</span><span style="color: #d01A4E;">'ll use the seq to create the xor sequences via</span>
<span style="color: #d01A4E;">  * the least signficant bits.</span>
<span style="color: #d01A4E;">  condition_boolean_vector (0 ... XOR_INPUTS).map{|i| (seq &amp; (1 &lt;&lt; i)) != 0}</span>
<span style="color: #d01A4E;">}</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline27"></a>The Compare Block<br  /><div class="outline-text-7" id="text-1-6-1-2-0-2">
<p>
Compare the fitness of two critters. We may choose a different ordering here.
</p>

<div class="org-src-container">

<pre class="src src-ruby">compare {|f1, f2| f2 &lt;=&gt; f1 }
</pre>
</div>
</div></li>

<li><a id="orgheadline28"></a>The Cost of Fitness Block<br  /><div class="outline-text-7" id="text-1-6-1-2-0-3">
<p>
Here we integrate the cost with the fitness.
</p>

<div class="org-src-container">

<pre class="src src-ruby">cost { |fitvec, cost|
  fit = <span style="color: #268bd2;">XOR_STATES</span> - fitvec.reduce {|a,r| a+r} - cost
  <span style="color: #cb4b16;">$log</span>.debug <span style="color: #d01A4E;">"&gt;&gt;&gt;&gt;&gt;&gt;&gt; fitvec *{fitvec} =&gt; *{fit}, cost *{cost}"</span>
  fit
}
</pre>
</div>
</div></li>

<li><a id="orgheadline29"></a>The Fitness Block<br  /><div class="outline-text-7" id="text-1-6-1-2-0-4">
<p>
The fitness block is called for each activation and is given the input vector,
the output vector, and the sequence number given to the query. The results are
evaluated and a fitness scalar is returned.
</p>

<p>
#+BEGIN<sub>SRC</sub> ruby
  fitness { |vin, vout, seq|
    unless vout <b>*</b> :error
      bin = uncondition<sub>boolean</sub><sub>vector</sub> vin
      bout = uncondition<sub>boolean</sub><sub>vector</sub> vout
      bactual = [xor(*vin)]
      vactual = condition<sub>boolean</sub><sub>vector</sub> bactual
      fit = (bout <b>*</b> bactual) ? 0.00 : 1.00
      <b>simple<sub>fitness</sub><sub>error</sub>(vout, vactual.map{|f| f * 0.50 })
      bfit = (bout **</b> bactual) ? 'T' : 'F'
      fit
    else
      $log.debug "Error on *{vin} [*{seq}]"
      1.0
    end
  }
#+ END<sub>SRC</sub>
</p>
</div></li>

<li><a id="orgheadline30"></a>The Termination Condition<br  /><div class="outline-text-7" id="text-1-6-1-2-0-5">
<p>
When the desired fitness level is reached, you may want to end the
Neater run. If so, provide a block to do just that.
</p>

<div class="org-src-container">

<pre class="src src-ruby">  stop_on_fitness { |fitness, c|
    puts <span style="color: #d01A4E;">"*** Generation Run *{c.generation_num}, best is *{fitness[:best]} ***\n\n"</span>
    fitness[<span style="color: #BFEBBF;">:best</span>] &gt;= <span style="color: #268bd2;">ALMOST_FIT</span>
  }
<span style="color: #b58900; font-weight: bold;">end</span>
</pre>
</div>
</div></li></ol></li>

<li><a id="orgheadline32"></a>Report Generating Block<br  /><div class="outline-text-5" id="text-1-6-1-3">
<p>
This particular report block just adds something to the log. You could easily
replace that with a visual update if you like, etc.
</p>

<div class="org-src-container">

<pre class="src src-ruby">report <span style="color: #b58900; font-weight: bold;">do</span> |rept|
  <span style="color: #cb4b16;">$log</span>.info <span style="color: #d01A4E;">"REPORT *{rept.to_yaml}"</span>
<span style="color: #b58900; font-weight: bold;">end</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline33"></a>Engine Run Block<br  /><div class="outline-text-5" id="text-1-6-1-4">
<p>
The block here is called upon the completion of each generation. The
'c' parameter is the RubyNEAT Controller, the same as given to the stop<sub>on</sub><sub>fitness</sub>
block.
</p>

<div class="org-src-container">

<pre class="src src-ruby">run_engine <span style="color: #b58900; font-weight: bold;">do</span> |c|
  <span style="color: #cb4b16;">$log</span>.info <span style="color: #d01A4E;">"******** Run of generation %s completed, history count %d ********"</span> %
        [c.generation_num, c.population_history.size]
<span style="color: #b58900; font-weight: bold;">end</span>
</pre>
</div>
</div></li></ol>
</div>

<div id="outline-container-orgheadline40" class="outline-4">
<h4 id="orgheadline40"><span class="section-number-4">1.6.2</span> Releases</h4>
<div class="outline-text-4" id="text-1-6-2">
</div><ol class="org-ol"><li><a id="orgheadline35"></a>v0.4.0.alpha.4<br  /><div class="outline-text-5" id="text-1-6-2-1">
<ul class="org-ul">
<li>First crude cut of a dashboard rubyneat<sub>dashboard</sub></li>
</ul>
</div></li>

<li><a id="orgheadline36"></a>0.3.5.alpha.6<br  /><div class="outline-text-5" id="text-1-6-2-2">
<ul class="org-ul">
<li>Command line workflow is a bit cleaner</li>
<li>Removed neater examples completely and place them in   
<a href="https://github.com/flajann2/rubyneat_examples">https://github.com/flajann2/rubyneat_examples</a></li>
<li>Cleaned up the internal docs a bit</li>
<li>Uniquely Generated Named Objects (UGNOs) cleaned up to be respectable</li>
</ul>
</div></li>

<li><a id="orgheadline37"></a>2015-06-08<br  /><div class="outline-text-5" id="text-1-6-2-3">
<ul class="org-ul">
<li>Working on the Iterated ES HyperNEAT still,
after being side-tracked by having to make a living.
Also creating a maze environment for the critters to
operate as bots in order to test the new ES HyperNEAT extension.</li>
<li>rnDSL, as a result of TWEANN Compositions, is undergoing
radical changes. All example Neaters will be 
eventually update to reflect the new syntax.</li>
</ul>
</div></li>

<li><a id="orgheadline38"></a>2014-09-25<br  /><div class="outline-text-5" id="text-1-6-2-4">
<p>
Hot on the efforts on adding two major features to RubyNEAT:
</p>

<ul class="org-ul">
<li>TWEANN Compositions &#x2013; you will be able to define composites of TWEANNs on
a per critter basis. This should mirror how, say, biological brains composite
themselves into regions of speciality. You may specify different selections
of neurons for each TWEANN. This is totally experiential, so we'll
see if this results in better convergence for some problems.</li>

<li>iterated ES HyperNEAT &#x2013; one of the compsitions
above can be specified as a Hyper TWEANN, and just
represent one of the many compositions you may have.</li>

<li>The syntax of the Neater DSL will change quite a bit to
reflect the new features, and all of the examples will
be rewritten to show this.</li>
</ul>

<p>
Do not confuse the ANN compositions here with CPPNs,
which are completely different. By default, all TWEANNs 
in HyperNEAT are potential CPPNs anyway, as
you can specify more than one neuron type.
</p>
</div></li>

<li><a id="orgheadline39"></a>2014-08-03<br  /><div class="outline-text-5" id="text-1-6-2-5">
<p>
Just released a very crude alpha cut of a 
dashboard for RubyNEAT. You will have to
install it manually, along with rubyneat.
The gem is rubyneat<sub>dashboard</sub>.
</p>

<ul class="org-ul">
<li>I am currently working on a Dashboard for RubyNEAT.
It will be a gemmable plugin that will allow you to
use the browser as the dashboard. It will have realtime
updates and the like, allowing you to monitor the progress 
of your Neaters, and to view and possibly set parameters,
and to see what your Critters look like.</li>
</ul>
</div></li></ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Lord Alveric</p>
<p class="date">Created: 2016-03-26 Sat 01:16</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
